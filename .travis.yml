language: csharp

osx_image: xcode8.1

rvm: 2.2

before_install:
- chmod a+x ./Scripts/install.sh
- chmod a+x ./Scripts/build.sh

install:
- ./Scripts/install.sh

script:
- xbuild /p:TargetFrameworkProfile="" /p:Configuration=Release ./SingedFeathers/SingedFeathers.sln
- nunit-console ./SingedFeathers/Temp/bin/Release/Assembly-CSharp-Editor.dll
- go test -v ./...
- ./Scripts/build.sh

os: osx

deploy:
  provider: s3
  access_key_id: $ACCESS_KEY_ID
  secret_access_key: $ACCESS_KEY
  bucket: "singedfeathers.online"
  local-dir: SingedFeathers/Builds/Web
  skip_cleanup: true
  acl: public_read
  region: "us-west-2"

notifications:
  slack:
    rooms:
      - whythehellnot:RlQRu5Twg2ZsabMC6K4SL6hu#travis
